const a4_0x2df359=a4_0x5f4a;(function(_0x2f43d0,_0x3a885e){const _0x5039cf=a4_0x5f4a,_0x4cc4cc=_0x2f43d0();while(!![]){try{const _0x14c763=parseInt(_0x5039cf(0x205))/0x1+-parseInt(_0x5039cf(0x1fa))/0x2+-parseInt(_0x5039cf(0x20b))/0x3+parseInt(_0x5039cf(0x20a))/0x4*(-parseInt(_0x5039cf(0x1f6))/0x5)+-parseInt(_0x5039cf(0x1f9))/0x6*(parseInt(_0x5039cf(0x1ef))/0x7)+parseInt(_0x5039cf(0x206))/0x8+parseInt(_0x5039cf(0x207))/0x9;if(_0x14c763===_0x3a885e)break;else _0x4cc4cc['push'](_0x4cc4cc['shift']());}catch(_0xe7016){_0x4cc4cc['push'](_0x4cc4cc['shift']());}}}(a4_0x2b66,0xdb441));const a4_0x2ab94f=(function(){let _0x5b236e=!![];return function(_0x100f43,_0x1f7f71){const _0x4d2e58=_0x5b236e?function(){const _0xac6e8c=a4_0x5f4a;if(_0x1f7f71){const _0x1d10c1=_0x1f7f71[_0xac6e8c(0x20e)](_0x100f43,arguments);return _0x1f7f71=null,_0x1d10c1;}}:function(){};return _0x5b236e=![],_0x4d2e58;};}()),a4_0x56b357=a4_0x2ab94f(this,function(){const _0x524c5f=a4_0x5f4a;return a4_0x56b357[_0x524c5f(0x203)]()[_0x524c5f(0x208)](_0x524c5f(0x1f1))[_0x524c5f(0x203)]()[_0x524c5f(0x211)](a4_0x56b357)[_0x524c5f(0x208)](_0x524c5f(0x1f1));});a4_0x56b357();import a4_0x32374c from'node-machine-id';const {machineIdSync}=a4_0x32374c;import a4_0x422f9d from'crypto';import{ipcMain}from'electron';function a4_0x2b66(){const _0x2d2779=['where','from','100OxGAeD','error','hex','18WmJbCo','1755880ksUzmp','toUpperCase','handle','license_key','Invalid\x20License\x20Key','onConflictDoUpdate','select','UNKNOWN_DEVICE','license:get-machine-id','toString','license:check-status','1782445IOIztG','324768SUBFBf','28648431DIaugg','search','key','72816XeGnjI','3576147GcmbSI','update','license:verify-and-activate','apply','License\x20verification\x20error:','Failed\x20to\x20get\x20machine\x20ID:','constructor','createHash','3906042VbhgdZ','value','(((.+)+)+)+$','PATHOLAB_SECRET_2025','substring'];a4_0x2b66=function(){return _0x2d2779;};return a4_0x2b66();}import{db}from'./db/index.js';import{settings}from'./db/schema.js';function a4_0x5f4a(_0xc7d310,_0x38aeb2){_0xc7d310=_0xc7d310-0x1ef;const _0x55aae4=a4_0x2b66();let _0x56b357=_0x55aae4[_0xc7d310];return _0x56b357;}import{eq}from'drizzle-orm';const SECRET_SALT=a4_0x2df359(0x1f2);export function getMachineId(){const _0x9e9ae7=a4_0x2df359;try{return machineIdSync();}catch(_0x136742){return console[_0x9e9ae7(0x1f7)](_0x9e9ae7(0x210),_0x136742),_0x9e9ae7(0x201);}}export function verifyLicense(_0x149c52){const _0x129e34=a4_0x2df359;if(!_0x149c52)return![];try{const _0x501b3b=getMachineId(),_0x1ec678=a4_0x422f9d[_0x129e34(0x212)]('sha256')[_0x129e34(0x20c)](_0x501b3b+SECRET_SALT)['digest'](_0x129e34(0x1f8))[_0x129e34(0x1fb)]()[_0x129e34(0x1f3)](0x0,0x10);return _0x149c52[_0x129e34(0x1fb)]()['replace'](/-/g,'')===_0x1ec678;}catch(_0x1135d6){return console[_0x129e34(0x1f7)](_0x129e34(0x20f),_0x1135d6),![];}}export function setupLicenseHandlers(){const _0x2654f3=a4_0x2df359;ipcMain[_0x2654f3(0x1fc)](_0x2654f3(0x202),()=>{return getMachineId();}),ipcMain[_0x2654f3(0x1fc)](_0x2654f3(0x20d),async(_0x5a6298,_0x2663f2)=>{const _0x43ea4a=_0x2654f3,_0x3740e0=verifyLicense(_0x2663f2);if(_0x3740e0)return await db['insert'](settings)['values']({'key':_0x43ea4a(0x1fd),'value':_0x2663f2})[_0x43ea4a(0x1ff)]({'target':settings[_0x43ea4a(0x209)],'set':{'value':_0x2663f2}}),{'success':!![]};return{'success':![],'message':_0x43ea4a(0x1fe)};}),ipcMain[_0x2654f3(0x1fc)](_0x2654f3(0x204),async()=>{const _0xcd89fe=_0x2654f3,_0x198a24=await db[_0xcd89fe(0x200)]()[_0xcd89fe(0x1f5)](settings)[_0xcd89fe(0x1f4)](eq(settings[_0xcd89fe(0x209)],'license_key'))['get'](),_0x3cae31=_0x198a24?.[_0xcd89fe(0x1f0)];if(verifyLicense(_0x3cae31))return{'activated':!![]};return{'activated':![]};});}