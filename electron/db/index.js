(function(_0xa37b9b,_0xdae2db){const _0x196acc=a2_0x5d4f,_0x4afe3c=_0xa37b9b();while(!![]){try{const _0x290ee9=parseInt(_0x196acc(0x1d3))/0x1+-parseInt(_0x196acc(0x1db))/0x2*(parseInt(_0x196acc(0x1bd))/0x3)+-parseInt(_0x196acc(0x1d8))/0x4*(-parseInt(_0x196acc(0x1d6))/0x5)+-parseInt(_0x196acc(0x1c1))/0x6*(-parseInt(_0x196acc(0x1c4))/0x7)+-parseInt(_0x196acc(0x1c7))/0x8*(parseInt(_0x196acc(0x1ce))/0x9)+-parseInt(_0x196acc(0x1cd))/0xa*(parseInt(_0x196acc(0x1d4))/0xb)+parseInt(_0x196acc(0x1de))/0xc*(parseInt(_0x196acc(0x1bf))/0xd);if(_0x290ee9===_0xdae2db)break;else _0x4afe3c['push'](_0x4afe3c['shift']());}catch(_0x186b27){_0x4afe3c['push'](_0x4afe3c['shift']());}}}(a2_0x542b,0x6dc0e));const a2_0x453356=(function(){let _0x290a4d=!![];return function(_0x15097a,_0x3eb5e9){const _0x452c83=_0x290a4d?function(){const _0xd3c29d=a2_0x5d4f;if(_0x3eb5e9){const _0x348a22=_0x3eb5e9[_0xd3c29d(0x1c3)](_0x15097a,arguments);return _0x3eb5e9=null,_0x348a22;}}:function(){};return _0x290a4d=![],_0x452c83;};}()),a2_0x37bae0=a2_0x453356(this,function(){const _0x5f282c=a2_0x5d4f;return a2_0x37bae0['toString']()[_0x5f282c(0x1be)](_0x5f282c(0x1da))['toString']()['constructor'](a2_0x37bae0)[_0x5f282c(0x1be)](_0x5f282c(0x1da));});a2_0x37bae0();import a2_0x5ccff9 from'path';import{drizzle}from'drizzle-orm/better-sqlite3';import a2_0x5884bf from'better-sqlite3';import*as a2_0x5f2818 from'./schema.js';let db;function a2_0x5d4f(_0x3331e4,_0x15679c){_0x3331e4=_0x3331e4-0x1bc;const _0x4c5fb6=a2_0x542b();let _0x37bae0=_0x4c5fb6[_0x3331e4];return _0x37bae0;}export function initDb(_0x849cd6){const _0x12353c=a2_0x5d4f,_0x3b7200=a2_0x5ccff9[_0x12353c(0x1c8)](_0x849cd6,'database.db'),_0x15c1db=new a2_0x5884bf(_0x3b7200);return _0x15c1db[_0x12353c(0x1cc)]('journal_mode\x20=\x20WAL'),db=drizzle(_0x15c1db,{'schema':a2_0x5f2818}),initializeTables(_0x15c1db),db;}function initializeTables(_0x59142c){const _0xb1cc71=a2_0x5d4f;_0x59142c[_0xb1cc71(0x1df)](_0xb1cc71(0x1d9));try{const _0x358aeb=_0x59142c[_0xb1cc71(0x1c9)]('PRAGMA\x20table_info(cases)')['all'](),_0x36cadb=_0x358aeb[_0xb1cc71(0x1d1)](_0x217c4e=>_0x217c4e[_0xb1cc71(0x1c2)]===_0xb1cc71(0x1c5));!_0x36cadb&&(_0x59142c[_0xb1cc71(0x1df)](_0xb1cc71(0x1d0)),console['log'](_0xb1cc71(0x1cf)));}catch(_0x4a5ee1){console['error'](_0xb1cc71(0x1cb),_0x4a5ee1);}seedInitialAdmin(_0x59142c);}import a2_0x5309bb from'bcryptjs';function a2_0x542b(){const _0x514672=['exec','hashSync','SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20users','3bAyykl','search','75166QWmAuV','log','92142EdtLQX','name','apply','133BggSKc','referral','run','8NGBJdT','join','prepare','admin','Migration\x20failed:','pragma','310JwICsx','1887885RGgnFj','Database\x20migrated:\x20Added\x20new\x20columns\x20to\x20cases\x20table.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20cases\x20ADD\x20COLUMN\x20referral\x20TEXT;\x0a\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20cases\x20ADD\x20COLUMN\x20sample_type\x20TEXT;\x0a\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20cases\x20ADD\x20COLUMN\x20collection_date\x20TEXT;\x0a\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20cases\x20ADD\x20COLUMN\x20collection_time\x20TEXT;\x0a\x20\x20\x20\x20\x20\x20','some','genSaltSync','203087iauvlt','158477TjdJXf','USER-','696530CoLTjU','Default\x20admin\x20user\x20created:\x20admin\x20/\x20admin@123','16AwspCr','\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20patients\x20(\x0a\x20\x20\x20\x20\x20\x20id\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20designation\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20patient_name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20age_years\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20age_months\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20age_days\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20gender\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20phone\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20email\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20collection_date\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20address\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20referral\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20sample_type\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20collection_time\x20TEXT\x0a\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20cases\x20(\x0a\x20\x20\x20\x20\x20\x20id\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20patient_id\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20patient_name\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20referral\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20sample_type\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20collection_date\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20collection_time\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20date\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20status\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20tests\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY(patient_id)\x20REFERENCES\x20patients(id)\x0a\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20tests_master\x20(\x0a\x20\x20\x20\x20\x20\x20id\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20test_name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20price\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20department\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20parameters\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20columns\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20interpretation\x20TEXT\x0a\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20settings\x20(\x0a\x20\x20\x20\x20\x20\x20key\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20value\x20TEXT\x0a\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20doctors\x20(\x0a\x20\x20\x20\x20\x20\x20id\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20type\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20specialization\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20phone\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20email\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20address\x20TEXT\x0a\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users\x20(\x0a\x20\x20\x20\x20\x20\x20id\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20username\x20TEXT\x20NOT\x20NULL\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20password_hash\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20role\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20created_at\x20TEXT\x20DEFAULT\x20CURRENT_TIMESTAMP\x0a\x20\x20\x20\x20);\x0a\x20\x20','(((.+)+)+)+$','424268ZCUuav','count','admin@123','552hdIztb'];a2_0x542b=function(){return _0x514672;};return a2_0x542b();}function seedInitialAdmin(_0x36ebae){const _0x197ba0=a2_0x5d4f,_0x551923=_0x36ebae[_0x197ba0(0x1c9)](_0x197ba0(0x1bc))['get']()[_0x197ba0(0x1dc)];if(_0x551923===0x0){const _0xb8a02f=_0x197ba0(0x1dd),_0x2c81a7=a2_0x5309bb[_0x197ba0(0x1d2)](0xa),_0x5b308c=a2_0x5309bb[_0x197ba0(0x1e0)](_0xb8a02f,_0x2c81a7);_0x36ebae[_0x197ba0(0x1c9)]('INSERT\x20INTO\x20users\x20(id,\x20username,\x20password_hash,\x20role)\x20VALUES\x20(?,\x20?,\x20?,\x20?)')[_0x197ba0(0x1c6)](_0x197ba0(0x1d5)+Date['now'](),_0x197ba0(0x1ca),_0x5b308c,'Admin'),console[_0x197ba0(0x1c0)](_0x197ba0(0x1d7));}}export{db};